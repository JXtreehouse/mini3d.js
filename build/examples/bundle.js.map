{"version":3,"file":"bundle.js","sources":["../../examples/src/main.js"],"sourcesContent":["var VSHADER_SOURCE=`\n    attribute vec4 a_Position;\n    attribute vec4 a_Color;\n    uniform mat4 u_ViewMatrix;\n    varying vec4 v_Color;\n    void main(){\n        gl_Position = u_ViewMatrix * a_Position;\n        v_Color = a_Color;\n    }\n`;\n\nvar FSHADER_SOURCE=`\n    #ifdef GL_ES\n    precision mediump float;\n    #endif\n    varying vec4 v_Color;\n    void main(){\n        gl_FragColor = v_Color;\n    }\n`;\n\nfunction createMesh(gl){\n\n    let mesh = new mini3d.Mesh();    \n    let position_data = [\n        0.0, 0.5, -0.4,\n        -0.5, -0.5, -0.4,\n        0.5, -0.5, -0.4,\n        0.5, 0.4, -0.2,\n        -0.5, 0.4, -0.2,\n        0.0, -0.6, -0.2,\n        0.0, 0.5, 0.0,\n        -0.5, -0.5, 0.0,\n        0.5, -0.5, 0.0\n    ];\n    let color_data = [\n        0.4, 1.0, 0.4,\n        0.4, 1.0, 0.4,\n        1.0, 0.4, 0.4,\n        1.0, 0.4, 0.4,\n        1.0, 1.0, 0.4,\n        1.0, 1.0, 0.4,\n        0.4, 0.4, 1.0,\n        0.4, 0.4, 1.0,\n        1.0, 0.4, 0.4\n    ];\n\n    mesh.setPositions(position_data, 3);    \n    mesh.setColors(color_data, 3);\n    mesh.apply();\n\n    let format = new mini3d.VertexFormat();\n    format.addAttrib(mini3d.VertexAttribSemantic.POSITION, 3);\n    format.addAttrib(mini3d.VertexAttribSemantic.COLOR, 3);\n\n    let buffer = new mini3d.VertexBuffer(format);\n    buffer.setData(mini3d.VertexAttribSemantic.POSITION, position_data);\n    buffer.setData(mini3d.VertexAttribSemantic.COLOR, color_data);\n    buffer.uploadData();\n\n    return mesh;   \n}\n\nfunction example(gl){\n    let shader = new mini3d.Shader();\n    if(!shader.create(VSHADER_SOURCE, FSHADER_SOURCE)){\n        console.log(\"Failed to initialize shaders\");\n        return;\n    }\n\n    shader.use();    \n    \n    var viewMatrix = new mini3d.Matrix4();\n    viewMatrix.setLookAtGL(0.2, 0.25, 0.25,  0, 0, 0,  0, 1, 0);    \n    shader.setUniform('u_ViewMatrix', viewMatrix.elements);   \n\n    var mesh = createMesh(gl);    \n\n    gl.clearColor(0, 0, 0, 1);\n    //gl.enable(gl.DEPTH_TEST);\n    // draw\n    gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);\n\n    mesh.draw(shader);\n\n}\n\nexport default function main(){\n    console.log('main');\n    example(mini3d.gl);\n}\n"],"names":["VSHADER_SOURCE","FSHADER_SOURCE","createMesh","gl","mesh","mini3d","Mesh","position_data","color_data","setPositions","setColors","apply","format","VertexFormat","addAttrib","VertexAttribSemantic","POSITION","COLOR","buffer","VertexBuffer","setData","uploadData","example","shader","Shader","create","console","log","use","viewMatrix","Matrix4","setLookAtGL","setUniform","elements","clearColor","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","draw","main"],"mappings":"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"}