{"version":3,"file":"bundle.js","sources":["../../examples/src/main.js"],"sourcesContent":["var VSHADER_SOURCE=`\n    attribute vec4 a_Position;\n    attribute vec4 a_Color;\n    attribute float a_Custom;\n    uniform mat4 u_ViewMatrix;\n    varying vec4 v_Color;\n    varying float v_Custom;\n    void main(){\n        gl_Position = u_ViewMatrix * a_Position;\n        v_Color = a_Color;\n        v_Custom = a_Custom;\n    }\n`;\n\nvar FSHADER_SOURCE=`\n    #ifdef GL_ES\n    precision mediump float;\n    #endif\n    varying vec4 v_Color;\n    varying float v_Custom;\n    void main(){\n        gl_FragColor = v_Color * v_Custom;\n    }\n`;\n\nconst Semantic_Custom = 'custom';\n\nfunction createMesh(){\n\n    let format = new mini3d.VertexFormat();\n    format.addAttrib(mini3d.VertexSemantic.POSITION, 3);\n    format.addAttrib(mini3d.VertexSemantic.COLOR, 3);\n    format.addAttrib(Semantic_Custom, 1);\n\n    let mesh = new mini3d.Mesh(format);    \n    let position_data = [\n        0.0, 0.5, -0.4,\n        -0.5, -0.5, -0.4,\n        0.5, -0.5, -0.4,\n        0.5, 0.4, -0.2,\n        -0.5, 0.4, -0.2,\n        0.0, -0.6, -0.2,\n        0.0, 0.5, 0.0,\n        -0.5, -0.5, 0.0,\n        0.5, -0.5, 0.0\n    ];\n    let color_data = [\n        0.4, 1.0, 0.4,\n        0.4, 1.0, 0.4,\n        1.0, 0.4, 0.4,\n        1.0, 0.4, 0.4,\n        1.0, 1.0, 0.4,\n        1.0, 1.0, 0.4,\n        0.4, 0.4, 1.0,\n        0.4, 0.4, 1.0,\n        1.0, 0.4, 0.4\n    ];\n    let custom_data = [\n        0.5,\n        0.5,\n        0.5,\n        1,\n        1,\n        1,\n        2,\n        2,\n        2\n    ];\n\n    mesh.setVertexData(mini3d.VertexSemantic.POSITION, position_data);    \n    mesh.setVertexData(mini3d.VertexSemantic.COLOR, color_data);\n    mesh.setVertexData(Semantic_Custom, custom_data);\n    mesh.upload();            \n\n    return mesh;   \n}\n\nfunction example(gl){\n    let shader = new mini3d.Shader();\n    if(!shader.create(VSHADER_SOURCE, FSHADER_SOURCE)){\n        console.log(\"Failed to initialize shaders\");\n        return;\n    }\n\n    shader.mapAttributeSemantic(mini3d.VertexSemantic.POSITION, 'a_Position');\n    shader.mapAttributeSemantic(mini3d.VertexSemantic.COLOR, 'a_Color');\n    shader.mapAttributeSemantic(Semantic_Custom, 'a_Custom');\n\n    shader.use();    \n    \n    var viewMatrix = new mini3d.Matrix4();\n    viewMatrix.setLookAtGL(0.2, 0.25, 0.25,  0, 0, 0,  0, 1, 0);    \n    shader.setUniform('u_ViewMatrix', viewMatrix.elements);   \n\n    var mesh = createMesh();    \n\n    gl.clearColor(0, 0, 0, 1);\n    //gl.enable(gl.DEPTH_TEST);\n    // draw\n    gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);\n\n    mesh.render(shader);\n\n}\n\nexport default function main(){\n    console.log('main');\n    example(mini3d.gl);\n}\n"],"names":["VSHADER_SOURCE","FSHADER_SOURCE","Semantic_Custom","createMesh","format","mini3d","VertexFormat","addAttrib","VertexSemantic","POSITION","COLOR","mesh","Mesh","position_data","color_data","custom_data","setVertexData","upload","example","gl","shader","Shader","create","console","log","mapAttributeSemantic","use","viewMatrix","Matrix4","setLookAtGL","setUniform","elements","clearColor","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","render","main"],"mappings":"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"}